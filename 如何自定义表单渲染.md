##什么是表单主题

symfony使用的是表单片段--一小块模板只渲染表单的一部分--渲染表单的每一部分--字段label,错误,input字段,select字段等等.

这片段的定义在Twig中是宜block的形式在PHP中以模板文件的形式

一个主题只不过是当你渲染表单时想要使用的一组设置的片段;换句话说,如果你想要自定义渲染表单的一部分,你将导入一个主题其中包含一个恰当的
自定义表单片段

symfony自带了4个表单主题,定义了每一片段需要渲染表单的每一部分

* [form_div_layout.html.twig](https://github.com/symfony/symfony/blob/master/src/Symfony/Bridge/Twig/Resources/views/Form/form_div_layout.html.twig),每个表单字段是包含在一个`<div>`元素里.
* [form_table_layout.html.twig](https://github.com/symfony/symfony/blob/master/src/Symfony/Bridge/Twig/Resources/views/Form/form_table_layout.html.twig),整个表单包含在`<table>`元素里和每个表单字段在一个`<tr>`元素里
* [bootstrap_3_layout.html.twig](https://github.com/symfony/symfony/blob/master/src/Symfony/Bridge/Twig/Resources/views/Form/bootstrap_3_layout.html.twig),表单字段包含在一个`<div>`元素里,使用合适的css类,默认是应用了[Bootstrap3 css框架](http://getbootstrap.com/)
样式.
* [bootstrap_3_horizontal_layout.html.twig](https://github.com/symfony/symfony/blob/master/src/Symfony/Bridge/Twig/Resources/views/Form/bootstrap_3_horizontal_layout.html.twig),
他和上面的一个主题很相似,但是应用的css类是用于展示一个水平表单(如.label和widget在一行里)

当你使用bootstrap表单且手动渲染字段,调用form_label()对于checkbox/radio字段不会展现任何东西.由于bootstrap内部,label已经通过
form_widget()来展示.

在下面章节你将要学习到如何重写一些或所有片段来子定义一个主题

例如,当一个integer类型字段渲染widget完成后,会生成一个number字段的文本框

    {{ form_widget(form.age) }}

渲染成:

    <input type="number" id="form_age" name="form[age]" required="required" value="33" />

内部,渲染这个字段symfony使用了integer_widget片段.这是因为这个字段类型为integer且你渲染他的widget(而不是他的label或错误)

在Twig中将默认使用form_div_layout.html.twig模板中的integer_widget block;

在PHP中它将使用位于`FrameworkBundle/Resources/views/Form`文件夹下的integer_widget.html.php文件

integer_widget 片段默认实现看起来像这个样:

    {# form_div_layout.html.twig #}
    {% block integer_widget %}
        {% set type = type|default('number') %}
        {{ block('form_widget_simple') }}
    {% endblock integer_widget %}

正如你所看到,这个片段他自己渲染了另外一个片段 - form_widget_simple：

    {# form_div_layout.html.twig #}
    {% block form_widget_simple %}
        {% set type = type|default('text') %}
        <input type="{{ type }}" {{ block('widget_attributes') }} {% if value is not empty %}value="{{ value }}" {% endif %}/>
    {% endblock form_widget_simple %}

关键是,这片段决定了一个表单的每部分HTML输出.自定义这些输出,你只需要确认和覆盖正确的片段.这样一组自定义的片段被称为表单“主题”,当渲染
一个表单的时候你能够选择你想要应用的表单主题

在Twig中一个主题是在单个模板文件里且block片段定义在这个文件里

在PHP中一个主题是一个文件夹且片段在这个文件夹里是独立的模板文件;

附注:

###自定义Block的相关知识

在这个例子中,自定义的片段名称是integer_widget因为你想要覆盖所有integer字段类型的HTML widget,如果你需要自定义textarea 字段,
你将自定义textarea_widget.

正如你所看到,这个片段名称是结合字段类型和该字段哪一部分被渲染(如,widget,label,errors,row),同样地,自定义一个文本tex字段的错误渲染
你应该自定义text_errors片段

然而,更常见的是你将想要自定义所有字段的错误,你通过自定义form_errors能够做到,这利用到了字段类型继承,具体的,因为text类型继承了form类型
表单组件将首先查看特定类型片段(如 text_errors)如果不存在返回到父类片段(如 form_errors)

想要查看这个主题的更多信息清查看[表单片段命名]()

##表单主题

看到表单主题的强大,假如你想要每个number字段包裹在一个div标签里,这样做关键是自定义integer_widget片段

##表单主题在Twig中

当在Twig中自定义表单字段的block，你有两个选择来存放自定义block的地方

<table>
<tr>
    <td>方法</td>
    <td>优点</td>
    <td>缺点</td>
</tr>
<tr>
<td>和表单在同一模板里</td>
<td>简单快速</td>
<td>在其他模板里不可复用</td>
</tr>
<tr>
<td>在一个单独的模板里</td>
<td>在很多模板里可以复用</td>
<td>需要额外的创建一个模板</td>
</tr>
</table>

这两个方法都有同样的效果,在不同情况下选择不同的方法效果会更好

###方法1: 和表单在同一个模板里

自定义integer_widget block最简单的方式是在实际渲染表单的模板里自定义它,

    {% extends '::base.html.twig' %}

    {% form_theme form _self %}

    {% block integer_widget %}
        <div class="integer_widget">
            {% set type = type|default('number') %}
            {{ block('form_widget_simple') }}
        </div>
    {% endblock %}

    {% block content %}
        {# ... render the form #}

        {{ form_row(form.age) }}
    {% endblock %}

通过使用特定的`{% form_theme form _self %}`标签,Twig看起来任何覆盖的表单block都在同一模板里.假设form.age字段
是一个integer类型字段,当widget渲染,自定义的integer_widget block将要被使用.

利用这个方法当在其他的模板里渲染其他表单这个自定义的表单block不能重复利用.换句话说,这个方法通常用于当你在应用程序中
为单个表单特定定制.如果你想要在你的应用程序里几个表单或所有表单都复用一个表单定制。阅读下面这一部分

###方法2: 在一个独立的模板里

你也能够选择自定义integer_widget表单block完全在一个独立的模板里；这个代码的结果是一样的,但是你能够在很多模板中复用

    {# app/Resources/views/Form/fields.html.twig #}
    {% block integer_widget %}
        <div class="integer_widget">
            {% set type = type|default('number') %}
            {{ block('form_widget_simple') }}
        </div>
    {% endblock %}

现在你已经创建了自定义表单 block,你需要告诉symfony使用它,在实际渲染表单模板里通过form_theme标签告诉symfony使用它

    {% form_theme form 'AppBundle:Form:fields.html.twig' %}

    {{ form_widget(form.age) }}

当form.age小物件渲染的时候,symfony将使用新模板里的integer_widget block且在自定义block中input标签将被包含在一个特定的div元素里

###多个模板

一个表单也能使用多个自定义应用模板,这样做,通过使用with关键字把所有的模板名称作为一个数组

    {% form_theme form with ['::common.html.twig', ':Form:fields.html.twig',
                             'AppBundle:Form:fields.html.twig'] %}

这些模板能够位于不同的bundle且它们也能够存储在全局的`app/Resources/views/`目录下。

###子表单

你也也可以将一个表单主题应用到你表单的具体子表单

    {% form_theme form.child 'AppBundle:Form:fields.html.twig' %}

这个通常用于当你想要为一个嵌套表单自定义主题

