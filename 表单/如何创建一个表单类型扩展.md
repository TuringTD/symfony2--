[原文地址](http://symfony.com/doc/current/cookbook/form/create_form_type_extension.html)

#如何创建一个表单类型扩展

当你需要字段类型有某些特定的用途,自定义字段类型是非常好的.比如gender选择器
或一个增值税号码输入(VAT)

但是有些时候,你真的不需要添加一个新的字段类型——你想要在已存在的类型中添加一些特征
这就是表单类型扩展了.

表单类型扩展有2个主要使用用例

1. 你想要在几个类型中添加一个通用功能(比如给每个字段类型添加一个"帮助"文本)
2. 你想要给单个字段类型添加一个特定的特征（比如给file字段类型增加一个"下载"特征）

在这两种用例里,有可能实现你的自定义表单渲染的目标,或者自定义字段类型,
但是使用表单类型扩展能够变的简洁(通过限制在模板中的业务逻辑量)和非常灵活
(你能添加多个类型扩展到单个表单类型上)

表单类型扩展可以实现大部分自定义字段的功能,但他们不属于字段类型他们自己,他们是插入
到现有的类型里

假如你有个一个Media实体,这每个media关联一个文件.你的Media表单使用了
一个file类型,但是当编辑这个实体时,你希望看到它的图像自动渲染在file输入框下面

当然你可以通过如何自定义这个字段在模板中的渲染来实现,但是字段类型扩展
允许你以一个很漂亮的方式来完成;

##定义表单类型扩展

你首要的任务将是创建一个表单类型扩展类(在这篇文章中称为ImageTypeExtension),
按标准,表单类型通常位于在你的bundles中的`Form\Extension`目录

当创建一个表单类型扩展,你要么实现`FormTypeExtensionInterface`接口要么
继承`AbstractTypeExtension`类.大多数情况下,继承抽象类要容易:

    // src/Acme/DemoBundle/Form/Extension/ImageTypeExtension.php
    namespace Acme\DemoBundle\Form\Extension;

    use Symfony\Component\Form\AbstractTypeExtension;

    class ImageTypeExtension extends AbstractTypeExtension
    {
        /**
         * 返回扩展名的名称
         *
         * @return 扩展名称是个字符串
         */
        public function getExtendedType()
        {
            return 'file';
        }
    }


这仅有一个getExtendedType方法你必须实现,它是用于指示该表单类型将要扩展那个表单类型的名称

小提示:
>getExtendedType 的返回值和你希望扩展的表单类型的类中getName方法返回值对应；

除了getExtendedType方法外,你将可能想要重写以下方法之一

* buildForm()
* buildView()
* configureOptions()
* cfinishView()
关于这些方法的更多信息,你能参考[创建自定义字段类型]cookbook文章.


##注册你的表单类型扩展作为一个服务

